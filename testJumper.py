import torch

def jump_counter(tensor):
    # Clonamos el tensor para evitar modificar el original
    tensor = tensor.clone().detach()
    
    # Calcula las diferencias entre puntos consecutivos en cada trayectoria
    diferencias = torch.abs(tensor[:, :, 1:] - tensor[:, :, :-1])

    # Calcula los saltos (diferencia > 1) y suma su magnitud, menos 1 (para que un salto de 2 cuente como 1, de 3 como 2, etc.)
    saltos = torch.clamp(diferencias - 1, min=0)

    # Suma los saltos de ambos UAVs en cada trayectoria
    saltos_totales = torch.sum(saltos, dim=(2, 3)).sum(dim=1)

    return saltos_totales/1000

print(jump_counter(torch.tensor([
[[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 1], [0, 1], [0, 0], [0, 1], [0, 0], [0, 30], [30, 0], [0, 0], [0, 1], [0, 0], [0, 21], [30, 30], [30, 0], [26, 0], [18, 0], [30, 0], [0, 0], [28, 0], [0, 0], [0, 0], [0, 1], [0, 30], [0, 0], [0, 30], [0, 2], [0, 30], [0, 1], [0, 30], [0, 0], [0, 30], [0, 29], [0, 30], [0, 29], [0, 30], [0, 30], [0, 30], [0, 30], [0, 28], [0, 30], [0, 30], [0, 30], [0, 29], [0, 28], [0, 30], [0, 30], [1, 29], [0, 0], [0, 30], [1, 30], [0, 30], [0, 30], [30, 30], [0, 30], [0, 30], [0, 30], [20, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [29, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 0], [0, 0], [0, 30], [0, 30], [0, 24], [0, 30], [0, 1], [0, 26], [0, 30], [0, 25], [30, 30], [30, 2], [0, 0], [0, 30], [0, 0], [0, 30], [30, 0], [1, 29], [0, 0], [4, 30], [0, 0], [0, 26], [30, 0], [30, 0], [0, 24], [30, 0], [0, 0], [30, 0], [0, 0], [0, 0], [8, 0], [0, 0], [30, 0], [30, 0], [0, 0], [1, 0], [30, 0], [0, 0], [30, 29], [0, 30], [30, 0], [0, 0], [30, 1], [0, 0], [13, 1], [29, 0], [0, 30], [0, 30], [1, 0], [0, 30], [29, 30], [0, 30], [25, 0], [0, 30], [30, 29], [30, 30], [27, 28], [29, 30], [30, 30], [30, 1], [0, 30], [0, 0], [1, 30], [0, 30], [30, 3], [30, 30], [0, 14], [0, 0], [30, 30], [30, 0], [0, 30], [0, 0], [30, 5], [0, 30], [30, 0], [0, 30], [0, 0], [0, 30], [0, 30], [0, 30], [0, 0], [0, 0], [0, 29], [0, 0], [0, 30], [0, 30], [0, 26], [0, 28], [0, 30], [0, 30], [30, 30], [0, 28], [0, 29], [0, 30], [0, 30], [0, 29], [30, 30], [0, 29], [20, 30], [15, 30], [30, 28], [30, 13], [30, 30], [30, 0], [30, 30], [30, 0], [30, 30], [30, 0], [30, 30], [30, 0], [0, 30], [30, 0], [30, 29], [30, 0], [0, 29], [4, 3], [30, 0], [0, 0], [30, 29], [28, 0], [0, 30], [0, 0], [30, 0], [30, 1], [0, 0], [30, 0], [22, 1], [0, 1], [30, 0], [0, 2], [0, 2], [0, 0], [0, 2], [30, 30], [0, 0], [0, 5], [20, 30], [0, 30], [1, 30], [0, 30], [0, 3], [0, 0], [0, 30], [0, 30], [0, 5], [0, 30], [0, 30], [0, 30], [5, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [1, 30], [0, 15], [0, 30], [0, 30], [1, 30], [1, 30], [0, 22], [30, 1], [0, 2], [0, 30], [0, 2], [0, 30], [0, 0], [0, 0], [0, 30], [0, 30], [0, 2], [0, 30], [30, 30], [30, 0], [0, 30], [0, 30], [1, 0], [0, 0], [30, 30], [30, 30], [0, 0], [0, 28], [30, 0], [0, 29], [30, 0], [30, 0], [0, 23], [0, 0], [30, 28], [30, 30], [1, 0], [0, 0], [30, 26], [0, 12], [30, 0], [30, 0], [0, 30], [0, 0], [30, 25], [30, 28], [0, 0], [0, 0], [30, 0], [30, 0], [0, 30], [0, 30], [30, 0], [0, 1], [30, 30], [0, 30], [6, 30], [0, 30], [0, 30], [0, 30], [30, 5], [0, 28], [30, 30], [0, 29], [0, 30], [0, 0], [0, 29], [0, 1], [0, 30], [0, 0], [0, 30], [0, 6], [0, 30], [0, 30], [0, 0], [0, 30], [0, 30], [30, 30], [0, 30], [1, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [3, 30], [0, 30], [30, 30], [0, 30], [0, 0], [30, 30], [0, 0], [30, 30], [30, 27], [0, 30], [30, 30], [0, 0], [30, 0], [30, 30], [30, 0], [0, 0], [24, 0], [30, 11], [30, 1], [0, 0], [30, 0], [0, 0], [30, 0], [0, 1], [30, 0], [8, 0], [0, 0], [30, 28], [30, 3], [5, 0], [30, 0], [30, 0], [0, 0], [30, 30], [30, 30], [0, 0], [30, 0], [0, 30], [0, 0], [29, 30], [0, 30], [0, 1], [0, 30], [0, 29], [0, 27], [0, 30], [0, 30], [0, 0], [0, 25], [0, 30], [0, 30], [0, 2], [0, 30], [0, 0], [30, 0], [0, 0], [0, 0], [0, 0], [0, 1], [0, 0], [0, 0], [0, 0], [0, 1], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [1, 0], [0, 0], [0, 0], [30, 0], [30, 0], [0, 0], [0, 0], [0, 0], [0, 0], [1, 1], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [30, 0], [0, 0], [0, 0], [0, 0], [3, 0], [0, 0], [30, 0], [0, 2], [0, 0], [0, 0], [30, 0], [30, 2], [3, 0], [0, 1], [0, 0], [0, 0], [4, 4], [19, 0], [2, 1], [30, 30], [6, 0], [30, 0], [0, 0], [2, 0], [17, 0], [30, 29], [0, 0], [30, 0], [0, 0], [0, 30], [30, 30], [0, 29], [30, 30], [30, 23], [30, 0], [1, 30], [30, 30], [0, 30], [30, 0], [30, 30], [0, 30], [0, 30], [30, 0], [30, 30], [0, 0], [0, 1], [30, 30], [30, 30], [1, 1], [0, 0], [30, 1], [30, 29], [0, 0], [30, 0], [0, 30], [0, 1], [1, 30], [0, 30], [0, 7], [0, 30], [0, 0], [0, 30], [25, 11], [0, 0], [0, 30], [0, 30], [0, 24], [0, 30], [0, 0], [0, 0], [0, 30], [0, 30], [0, 30], [0, 25], [0, 30], [0, 30], [0, 0], [0, 27], [0, 30], [0, 30], [0, 24], [0, 30], [0, 30], [0, 30], [1, 30], [0, 30], [0, 29], [0, 30], [30, 7], [21, 0], [8, 30], [0, 30], [30, 29], [0, 25], [30, 30], [30, 28], [0, 30], [0, 0], [30, 30], [0, 0], [30, 30], [30, 0], [0, 30], [0, 0], [30, 30], [0, 0], [30, 25], [30, 30], [0, 0], [0, 0], [1, 0], [0, 0], [30, 0], [0, 0], [30, 28], [30, 0], [30, 0], [30, 0], [30, 0], [30, 0], [30, 30], [30, 3], [28, 0], [30, 0], [30, 30], [30, 0], [0, 29], [25, 30], [0, 0], [0, 30], [30, 1], [0, 0], [0, 30], [0, 30], [2, 1], [1, 30], [0, 3], [0, 2], [0, 30], [0, 30], [0, 0], [0, 3], [0, 30], [0, 30], [0, 30], [1, 29], [0, 30], [0, 30], [0, 1], [0, 1], [0, 30], [0, 1], [1, 30], [0, 30], [0, 30], [1, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 0], [0, 0], [0, 3], [0, 30], [22, 0], [0, 30], [0, 0], [0, 0], [0, 30], [0, 0], [0, 30], [0, 30], [0, 0], [0, 30], [0, 0], [0, 30], [30, 0], [30, 30], [0, 0], [0, 30], [30, 0], [30, 30], [0, 0], [0, 0], [30, 18], [30, 30], [0, 0], [0, 30], [30, 0], [0, 0], [30, 30], [17, 0], [0, 27], [1, 30], [0, 0], [0, 30], [0, 0], [30, 0], [0, 5], [0, 0], [30, 0], [30, 3], [0, 0], [0, 0], [0, 5], [30, 0], [0, 1], [25, 30], [0, 0], [27, 30], [0, 0], [0, 30], [0, 0], [0, 0], [0, 30], [0, 30], [30, 29], [0, 30], [0, 30], [0, 0], [0, 30], [0, 1], [0, 30], [0, 30], [0, 0], [0, 30], [0, 0], [0, 30], [0, 2], [0, 30], [0, 27], [0, 30], [0, 0], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [30, 30], [0, 30], [0, 29], [30, 30], [0, 30], [0, 30], [30, 0], [0, 30], [0, 30], [30, 0], [30, 0], [30, 4], [30, 30], [30, 0], [30, 30], [30, 0], [30, 0], [0, 0], [30, 21], [30, 0], [30, 30], [30, 0], [30, 0], [30, 0], [30, 30], [0, 0], [30, 0], [30, 24], [30, 30], [0, 0], [0, 30], [30, 0], [0, 30], [30, 0], [0, 1], [30, 30], [0, 30], [30, 18], [0, 0], [0, 30], [0, 0], [0, 30], [0, 0], [0, 30], [21, 0], [0, 30], [0, 22], [0, 30], [0, 22], [0, 30], [30, 29], [0, 0], [19, 0], [0, 30], [0, 30], [0, 21], [30, 30], [0, 0], [0, 30], [0, 0], [0, 0], [1, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [16, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [0, 30], [29, 30], [0, 30], [30, 30], [0, 30], [30, 30], [3, 19], [30, 29], [30, 25], [24, 27], [30, 30], [0, 0], [30, 2], [0, 30], [1, 0], [30, 27], [30, 30], [0, 0], [0, 0], [0, 29], [0, 30], [30, 0], [0, 1], [30, 30], [30, 30], [0, 0], [30, 5], [30, 0], [30, 0], [0, 29], [0, 0], [0, 0], [0, 0], [1, 0], [1, 0], [0, 7], [0, 1], [0, 0], [2, 0], [0, 0], [0, 0], [0, 6], [0, 0], [1, 28], [0, 0], [0, 28], [0, 0], [1, 1], [0, 0], [1, 25], [1, 0], [0, 0], [1, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]]
           ]
    )))